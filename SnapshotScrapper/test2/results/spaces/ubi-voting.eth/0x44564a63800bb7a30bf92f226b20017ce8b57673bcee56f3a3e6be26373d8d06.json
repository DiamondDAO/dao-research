{"id": "0x44564a63800bb7a30bf92f226b20017ce8b57673bcee56f3a3e6be26373d8d06", "title": "[Phase-3][Binding] UIP-2: Adding EIP-2612 permit function to UBI", "body": "```\nUIP: 2\ntitle: Adding EIP-2612 permit function to UBI\nauthor: @donosonaumczuk\nstatus: Phase 3\ncreated: 2021-08-27\nconflicts with: None\nlanguages: EN\n```\n\n## Simple summary\n\nThis change adds `permit` function as defined at [EIP-2612](https://eips.ethereum.org/EIPS/eip-2612) allowing users to approve transfering their UBIs to another address (user or contract) in a gasless way.\n\n## Abstract\n\nWhen a user wants to transfer a specific amount of UBI to an address it must perform a `transfer` transaction. Another way could be performing an `approve` transaction allowing the recipient to pull some amount through a `transferFrom` transaction (this last one is the common approach when depositing an ERC-20 to a smart contract).\n\nThese two methods of transfering UBI have one thing in common: they both requires UBI sender to perform a transaction. In consequence, requires UBI sender to have ETH to pay for that transaction.\n\nThis proposal allows transfering UBI in the second mentioned way but letting a third party to perform the approval through a `permit` function, that requires a signature of the UBI holder to give consent about the operation, that could be executed by anyone.\n\nIn addition, this improves the UX when integrating UBI with other contract as, after signing the permit, UBIs could be deposited to the contract in a single transaction that performs `permit` and `transferFrom`, instead of the common two-transaction method.\n\nThe `permit` function is already integrated to [UNI](https://github.com/Uniswap/governance/blob/eabd8c71ad01f61fb54ed6945162021ee419998e/contracts/Uni.sol#L173), [AAVE](https://github.com/aave/aave-token-v2/blob/master/contracts/token/AaveTokenV2.sol#L69), [GRT](https://github.com/graphprotocol/contracts/blob/dev/contracts/token/GraphToken.sol#L96) and other well-known ERC-20 tokens.\n\n## Implementation\n\nThe permit method signature is the following:\n\n```\n  /**\n  * @dev Approves, through a message signed by the `_owner`, `_spender` to spend `_value` tokens from `_owner`.\n  * @param _owner The address of the token owner.\n  * @param _spender The address of the spender.\n  * @param _value The amount of tokens to approve.\n  * @param _deadline The expiration time until which the signature will be considered valid.\n  * @param _v The signature v value.\n  * @param _r The signature r value.\n  * @param _s The signature s value.\n  */\n  function permit(address _owner, address _spender, uint256 _value, uint256 _deadline, uint8 _v, bytes32 _r, bytes32 _s) public;\n```\n\nA complete implementation of this proposal could be found at UBI repository, [pull request #95 ](https://github.com/DemocracyEarth/ubi/pull/95).\n\nThe following tests cases had been added:\n\n```\n\u2713 require fail - permit signature expired\n\u2713 happy path - permit increases allowance to expected value\n\u2713 require fail - permit signature already used\n\u2713 happy path - permit setting allowance to zero\n\u2713 require fail - permit signature built with invalid nonce\n\u2713 require fail - permit with owner as zero address\n\u2713 happy path - permit called by a third party increases allowance to expected value\n```\n\n", "choices": ["Approve UIP-2", "Reject UIP-2"], "start": 1635951600, "end": 1636642800, "snapshot": "13545942", "state": "closed", "author": "0x42a578e3557f5854B27D48E7d753fEb2f428546D", "space": {"id": "ubi-voting.eth", "name": "UBI DAO"}, "votes": 58, "votes_data": [{"id": "0x7928bd06c6964fac4fc4d45afcb73dee7a778f9cd0406e42298c34335e3280b8", "voter": "0xaF323A35075A7cF7Da7c6b4Db4B5082F7b995ee3", "created": 1636598367, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x62fbcf7fedfc74b88701619d1a1d7e3e7bd0b2120ee48416b268153220980f26", "voter": "0xA72ef9BB82d59464eAA63f461C273f8028b20f5c", "created": 1636592709, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0xd8500a0f98289487c4534e9193ef8f5145f28a2e312939042eaecea425fdd7dd", "voter": "0x4cF040B4615bc9545D991b40b93D51AE84837189", "created": 1636583351, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0xe4c67b3fedf5d9ac30f1671a32856e78540f1a31ca322103100ac734e5b256d8", "voter": "0x912E804E16F7ef6a3eddf2f7c5bcb38d2a2C5E43", "created": 1636578916, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x6f1cca1635b019f46fc3e1def5595626f0bc51c523dc028aec2fb17549043536", "voter": "0x7BBbDD9bC719b6A7bB6Cd0C912bf35a14d05C21D", "created": 1636571838, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0xcd12c320fb7e9ac58d54bae97e8030a25b5ea8de490bde9e6345706df81505ad", "voter": "0x558B929A122cC1aA790A786A8444e03BB2837256", "created": 1636571328, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x031408e373ad8f44fd3606a2afe824067856e81e11df592cb013f6836a09fee6", "voter": "0x219a76db7fefE7140A269603970D112Ec9dDd7eB", "created": 1636571297, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0xb9646e4cf217d167871abfc4c5d0a3f0740f9f40d41e1c99b9daa162d6fb28d0", "voter": "0x76288BE212C272dd56dc9A73f1A25d2151Dbb2C8", "created": 1636506018, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x8356aa67314226932ca26b7a4c32042be763bda4a5661b496622124f33ce1f40", "voter": "0xf909AAd6A984B2C097a03a239711E6d3bE8C2E12", "created": 1636503838, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x34956ee8e9c5800b15ce513ec8dd370cc5655043e56e00e43b6f9547a8d15ce2", "voter": "0x250eeb1EF7B852c4b3477ace1E69299F7Cc4744a", "created": 1636490503, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x977da11d267313f1cf8bec037e3cdda7d5dcead962074fadad9f4eaa635ce20a", "voter": "0xa0766028f1712C641A9A7D34535b9cAA10f5B496", "created": 1636473271, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x1b2529b34c25afc83090eff6cc338c8a9fbd7d87b7a0cc5ae8ce8a68a134359f", "voter": "0x0827ED3a46c9793005e4D68E838DE577Cd8DD752", "created": 1636473003, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0xae0e2f2299f1d8fad935016ad37289a9b507043556852bf86d91e5f791e2d2c4", "voter": "0x110A6c50A4A44C1fc5903a5A41E17596D959aC6A", "created": 1636466555, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x3b15d0c76bd91de5734c6c187644ff8cc76e3fc5c89e3fbff8d4f745633d0150", "voter": "0xf2067CCD06fDdf3DD90d3a850244434214C6143D", "created": 1636460015, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x51ebfccd01d6031d12b84da8afbea1975ce560e2aeed262df6dc9573b6fcd52e", "voter": "0xb525F6b3b5EFCC0C54582de2F08D890F7793e3e4", "created": 1636405574, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x729abae68fc7e2ad0c9bef1abf1e011609a08d7d9d273a606c9c4f9f2ea669c5", "voter": "0x5886f65425cad457776d7a89a399907c97e608e5", "created": 1636239567, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x5f2e2c6a8f4157e3c36e0e383fdb259dd94ea8ed20cf9bd28a5fc66f6beec1d5", "voter": "0xf7137733764f13517973d70c42142AeDE4AF7Caa", "created": 1636121529, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "QmSmax8Gk8Ej5VU4zciYGxPEUJeBwpZEry3UJMuZ42mtrt", "voter": "0x274D52b7B6B3D491369F4950D6201Db3A12fc026", "created": 1636076583, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x2a1d7c98d46f4249668706909c736448da08cb92958bbe287f825c7419646b83", "voter": "0x75Cb2064bA96Ff26eE3D6004345470AEFda41C97", "created": 1636071639, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x3222b11cfbda0a458a47f1c78839cec3a85395303eea6589a6aae04f7d64919e", "voter": "0x8694Be0DC0EFE6B683C92b669006aB052F396Cf3", "created": 1636069283, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x061201bf4d6f99f84b3bc8f302253062e598eb10843a2f9f7d3b0601fb8fbedc", "voter": "0x8d5C4b4C0085Ffc51A882B03Aa2B3c902EBff848", "created": 1636056314, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0xac9214dfb15670889c05e674c09a3c7f280aba3165ac9977cd7d87b3f4ef77a0", "voter": "0xfd1Af514B8b2bf00d1999497668BFF26Ccdf4C8a", "created": 1636048901, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0xcd54f9a178ad6ce6077b43763e10dde37109678bdb5d72422d6ee65d3e91c22e", "voter": "0xBdf9eb81B7EB5F0686A2C4748a07945dc9Fd89d6", "created": 1636039534, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0xef3aaf08dfc11899a7df429490b57f2e701e8927c9071ea73a014018912530f1", "voter": "0xcE1770093e3F2E02AC92412E403863fb7e367928", "created": 1636038294, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x8e583818d7378f5a0d1cfc08254b069f65dd1d0c545efcb9e6ee63fcf714b220", "voter": "0xb464CA834796272E08Dc6460940B281B046a2cEe", "created": 1636036132, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "QmcLg6YEeh2dVnrv4b7mYcTc9VgVmmhvpEox2bnWpWmLEh", "voter": "0x2759E4C5C62C3D4f377a168cA42F80f3251c0832", "created": 1636034822, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x8ea15f8fe434792b52cd5be47aa23a0cdd15840061086f83d29ef8473a5c7cc9", "voter": "0x066E3B7E4ac0878Fa6930c539cA3745e1D501B1e", "created": 1636034606, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x9e53a21b9bddcb34cfe3f7c5ed5ec445429f03819bc9d4e8c4b6d1a9f4582e6d", "voter": "0x31452B884F5269eD21e2BAB44CC6A9d48eAac85f", "created": 1636034527, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0xb3525192523bd17fce2ebd1534934d60a3e0520a1147ebbd01995a834c060752", "voter": "0x4074D0b0519610bb675e7d74B4171039d230F451", "created": 1636032859, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x525ca1357e4328f561436e0274a5de8b03728bc9c46074bd2eb886dff175f061", "voter": "0x15B3f5060788Ff10622e4568d2070bf4C821080f", "created": 1636019541, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0xe4a114a1d542bce0929778272e52d954e7a675999fb7ae43cf8d98a7dd37f444", "voter": "0xde46215e67d35972f4C880D59969DD08a4c9fA28", "created": 1636017865, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x0f402876b95384390ab7d91a342f9cf7e0b5f0b71a53a1f12e0158a9acbfe9bf", "voter": "0x348F426e73484A07b23265B2CD66E0139F77FC21", "created": 1636015540, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "QmYNmYAaQa3zwLJq5kJxnJgiqt2WQg5nZWT4G4smfAX3L4", "voter": "0xF050F941d2563ece2c9FF3a47a39113F30bFfeA9", "created": 1635995425, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0xb11052659df111792bff1b49bcf387d5b18e6b2961fc05c679babd07ca3d7eb5", "voter": "0x0475d5877C4723ace15e63019ED2766A643Eb80b", "created": 1635994824, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "QmXU4X6NGouu2ebo1DWjL7c2MoWhVuyusgVRL8LauD66nJ", "voter": "0x816384B4E6644f3A1Cb683E1CB83409A464532eA", "created": 1635994596, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x766d2e41f79c90890771f7da1a13abe6d855e7c9b6640f6d10d16eedcef95b35", "voter": "0xC97C5931C53223B434b64B44d03f4d5B404126b1", "created": 1635993274, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x499d85de7bac6405c6ee3eaebfa3b2f004cb6b45904686e9d2e7ec6b20125066", "voter": "0x68c0dd2b5A5df00Bca4f7df8CA9b1425Fe817728", "created": 1635992821, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x6b657b62b71d943b1875aa7fdbb4eb43e62fb80f640d642df2aced359bff73ef", "voter": "0xa93159AC7fD211361b7e036199Cfe7f6625C35f8", "created": 1635992774, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "QmZVZg9fBMpr31MtZVtgFnyQoDpcfxTZS8YfnEPRxKojs5", "voter": "0xBFE5cCa09D784E24172f3C5c4eC0aE95eE931341", "created": 1635992456, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0xcd8679b91e99b3d19cffefbd87aef870f71abf10f64924c79829ba778ed1248e", "voter": "0x5CfA0c362DADEa86478d05767ed800dd1B026749", "created": 1635991987, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0xb53e8c226bb47f512ea97bb7f9051cab85ac4adb77ca366904229ecac0f84a36", "voter": "0x33bCcA4cfAE8198a9Dc64B3454621208c4B7eC59", "created": 1635991957, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x4e3550f330cbca69484964fc5519f04418626c499b16442a0c290ed5319736d8", "voter": "0x26D06ec9a2dd19cb33398a58f75d9Aa61dda11cD", "created": 1635991926, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x83e72c34147009e31dd5264d47bf730ca9c0596f05f90e14313b5b75693cc6f7", "voter": "0x6986E8C8Da33753443959690c240B03931Bd1Edc", "created": 1635991835, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x37932d66c02860aa08561dd1f87b1f9df68b09c7ca98d74875481c99596d5e1b", "voter": "0xf88086EA90856E6E8C9346Cf4394a1E352Ae119E", "created": 1635989923, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x79d6cc86c859e30f47f6c408da0495b244832373aaaeebdf89092bef34f94612", "voter": "0xC88920b0e3DAab93e9b539a21764A2F50682c2Ec", "created": 1635988860, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x01198c96044d0625cfe6bf8e5fc612fd434242be4bcb642dcc5b070effa78c73", "voter": "0x8b141ab13f99F3935C5347Db7526C2586bBB4D99", "created": 1635988573, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x45e8bc24ece4dd05782c88edb36fed300786c6f9f705a9eda2f8043a06c814fd", "voter": "0x3BE28A28B85c36FB74e513898bC11260Ee541AAC", "created": 1635988259, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x897182ec999ec1fe1f0c5a78aa8bf203b80e7bdba71af36c84b743b35ca69dfc", "voter": "0xc0D3c73Db385527239CeAcc62c8Ac0719684c0df", "created": 1635987866, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0xa0f719cb5287c7c3ed5ed68d8abf6e483624353e17bceec557064c45123b1328", "voter": "0xa392Cb2AEEf09819F6450031ed54401d53c84738", "created": 1635987844, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0xedb4bc623cd403505269be35b2cf8cf9eab6d29595705eaf9a3460e7fd9d0889", "voter": "0x4F564d1E8E6d5B7139d103b1936f78701416B914", "created": 1635987833, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x4fc9c150d38a767d89e626811c76763c87a997348e1808b7ca9c394293b95a47", "voter": "0xe0BBF828d87cbc56d984f8DF3f52c91227c4aE79", "created": 1635987809, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x1faf8f0d08815ce7e81199dd369ac9bb38265890948c181d86a05641f85c74e2", "voter": "0x245Bd6B5D8f494df8256Ae44737A1e5D59769aB4", "created": 1635980050, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x913fe582bdbac41ab85b5bc11f15349cf845efa0e918ec8f8e42da5d3648ac05", "voter": "0x8C775808Fffbb99208452698bc619Cf9D07d8b2e", "created": 1635976456, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x8adfd9832f49029a1195f3817625cbdcbb0e7d5f6a097cff9c1d90c7928d0463", "voter": "0xD733cC4df0C8d6BB2D9E4215Ae64cB02812B50FB", "created": 1635972368, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0xd106bf531ac8b4da29d947c98499b6a51fd8a5e50e53457194320ad1e2787bc0", "voter": "0x504E7620069a0a8354434dED3150ed7E2ECF5153", "created": 1635972339, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x5b9e93a1e4fac40109d07408e8476a5b44b8c937376d8076d42611b92866d2fb", "voter": "0x482C96b007EA453cb55A3DC11ceB8830e18F0639", "created": 1635971402, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0x9a2789742ee54dd8b3351a4adf6f3c97f8de6618b2a0f57f0f09ecc427373ef5", "voter": "0x2ad91063e489CC4009DF7feE45C25c8BE684Cf6a", "created": 1635971043, "choice": 1, "space": {"id": "ubi-voting.eth"}}, {"id": "0xa9699b35614a18eb9da6e5af2d6e093d6f80d82df069a22be3d3f11cd66f604d", "voter": "0x6687c671980E65ebD722b9146Fc61e2471558dd6", "created": 1635970672, "choice": 1, "space": {"id": "ubi-voting.eth"}}]}